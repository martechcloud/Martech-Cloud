<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Phone Messages</title>
<style>
* { box-sizing: border-box}
body{
  font-family: 'Asap', sans-serif;
}
.phoneswrapper{
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.phone{
  height:  600px;
  width: 300px; 
  padding: 10px 20px;
  border-radius: 32px;
  border: 8px solid #3e3e3e;
  overflow: hidden;
  position: relative;
  box-shadow: 0px 17px 20px rgba(0, 0, 0, 0.15);

}
.phone_head {
    display: flex;
    flex-direction: row;
    justify-content: space-between; 
     align-items: center;
    height: 45px;
}
.phone_head .title{
  font-size: 24px;
  font-weight: 500;
  color: #34394F;
}
.icon_bubble.msg {
    width: 30px;
    height: 30px;
    background: #25D366;
    border-radius: 50%;
}

.divider {
    height: 1px;
    width: 111%;
    background: #25D366;
    margin-bottom: 12px;
}
.grad_pb{ background: #25D366;
  color: white; 
  }
img.chat_avatar {
    width: 45px;
  height: 45px;
    border-radius: 7px;
  margin-right: 8px;
}
img.chat_avatar {
    width: 45px;
   box-shadow: 1px 6px 18px rgba(31, 37, 72, 0.45);
    border-radius: 7px;
}

.chat {
    display: flex;
    justify-content: space-between;
    padding: 15px 0px;
    border-bottom: 1px solid #d3d3d35e;
}

.contact_name {font-weight: 500;

  color: #34394F;
     font-size: 15px;
    margin-bottom: 2px;}

.contact_msg {
   
     font-size: 11px;
    color: #a5a5a5;
    font-weight: lighter;
}
.chat_info {width: 50%;}

.chat_date { 
    font-size: 12px;
    color: #5a5a5a;
  margin-bottom: 2px;
 float: right; }

.chat_new{ 
  padding: 2px 5px;
  font-size: 11px;
  border-radius: 2px;
 background-color: #25D366; color: white; }
.chat_status {
    width: 25%;
    display: flex;
    flex-direction: column;
    align-items: center; 
}

.phone_footer {
    position: absolute;
    bottom: 0;
    height: 61px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    right: 0px;
    background: linear-gradient(0deg, white 40%, #ffffffa1 85%, transparent 95%);
}

.footer_divider {
    height: 5px;
    width: 45%;
    border-radius: 10px;
  
     margin-top: 35px;
}* { box-sizing: border-box}
body{
  font-family: 'Asap', sans-serif;
}
.phoneswrapper{
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
  padding: 20px;
}

.phone{
  height:  600px;
  width: 300px; 
  padding: 10px 20px;
  border-radius: 32px;
  border: 8px solid #3e3e3e;
  overflow: hidden;
  position: relative;
  box-shadow: 0px 17px 20px rgba(0, 0, 0, 0.15);

}
.phone_head {
    display: flex;
    flex-direction: row;
    justify-content: space-between; 
     align-items: center;
    height: 45px;
}
.phone_head .title{
  font-size: 24px;
  font-weight: 500;
  color: #34394F;
}
.icon_bubble.msg {
    width: 30px;
    height: 30px;
    background: #25D366;
    border-radius: 50%;
}

.divider {
    height: 1px;
    width: 111%;
    background: #25D366;
    margin-bottom: 12px;
}
.grad_pb{ background: #25D366;
  color: white; 
  }
img.chat_avatar {
    width: 45px;
  height: 45px;
    border-radius: 7px;
  margin-right: 8px;
}
img.chat_avatar {
    width: 45px;
   box-shadow: 1px 6px 18px rgba(31, 37, 72, 0.45);
    border-radius: 7px;
}

.chat {
    display: flex;
    justify-content: space-between;
    padding: 15px 0px;
    border-bottom: 1px solid #d3d3d35e;
}

.contact_name {font-weight: 500;

  color: #34394F;
     font-size: 15px;
    margin-bottom: 2px;}

.contact_msg {
   
     font-size: 11px;
    color: #a5a5a5;
    font-weight: lighter;
}
.chat_info {width: 50%;}

.chat_date { 
    font-size: 12px;
    color: #5a5a5a;
  margin-bottom: 2px;
 float: right; }

.chat_new{ 
  padding: 2px 5px;
  font-size: 11px;
  border-radius: 2px;
 background-color: #25D366; color: white; }
.chat_status {
    width: 25%;
    display: flex;
    flex-direction: column;
    align-items: center; 
}

.phone_footer {
    position: absolute;
    bottom: 0;
    height: 61px;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    right: 0px;
    background: linear-gradient(0deg, white 40%, #ffffffa1 85%, transparent 95%);
}

.footer_divider {
    height: 5px;
    width: 45%;
    border-radius: 10px;
  
     margin-top: 35px;
}
/* Message styles */
.message {    
    padding: 10px 15px;
    margin: 5px 0;
    border-radius: 15px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    max-width: 80%;
    position: relative;
 background-color: #25D366; color: white;  font-size: 0.9em;  background-color: white;  color: black; } .message_received { background-color: white; color: #333; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }

/* Differentiating user's messages and other's messages */
.message.user {
    background-color: #53d9ea; /* Light blue color for user's messages */
    margin-left: auto;
    border-top-right-radius: 5px;
}

.message.other {
    background-color: #eee; /* Light gray color for other's messages */
    margin-right: auto;
    border-top-left-radius: 5px;
}

/* Text and timestamp styling */
.message strong {
    font-weight: bold;
    color: #34394F;
}

.message small {
    display: block;
    margin-top: 5px;
    font-size: 10px;
    color: #aaa;
}

.phone {
    overflow-y: scroll;
}

/* Hide scrollbar for Chrome, Safari and Opera */
.phone::-webkit-scrollbar {
    display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.phone {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
}

.message {    
    font-size: 1.1em;
    padding: 10px 15px;
 background-color: #25D366; color: white;  font-size: 0.9em;  background-color: white;  color: black; } .message_received { background-color: white; color: #333; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }

.message {    
    max-width: 100%;  /* Increase the width of the message bubbles */
 background-color: #25D366; color: white;  font-size: 0.9em;  background-color: white;  color: black; } .message_received { background-color: white; color: #333; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }

.message {    
    font-size: 1.1em;  /* Increase the text size */
    font-family: 'serif', serif;  /* Change to a more elegant font */
    line-height: 1.4;  /* Improved readability */
    color: #333;  /* Slightly darker text for better contrast */
 background-color: #25D366; color: white;  font-size: 0.9em;  background-color: white;  color: black; } .message_received { background-color: white; color: #333; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }

.message {    
    border-radius: 12px;  /* Rounded edges for the message box */
    background-color: white;  /* Semi-transparent white background */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);  /* Subtle shadow for depth */
    padding: 20px 20px;  /* Spacious padding */
 background-color: #25D366; color: white;  font-size: 0.9em;  background-color: white;  color: black; } .message_received { background-color: white; color: #333; box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1); }

img[alt="Profile Photo"] { 
    border-radius: 50%;  /* Circular appearance */
    margin-right: 10px;  /* Space between image and name */
    vertical-align: middle;  /* Align the image with the text vertically */
 width: 60px; height: auto; display: block; margin-right: 10px; }

.message > br:first-child {  /* Remove the first <br> after the image for a cohesive look */
    display: none;
}

.chat_avatar {
    width: 45px;
  height: 45px;
    border-radius: 7px;
  margin-right: 8px;
}
.chat_avatar {
    width: 45px;
   box-shadow: 1px 6px 18px rgba(31, 37, 72, 0.45);
    border-radius: 7px;
}
.chat {
    display: flex;
    justify-content: space-between;
    padding: 15px 0px;
    border-bottom: 1px solid #d3d3d35e;
}
.chat_info {width: 50%;}
.chat_date { 
    font-size: 12px;
    color: #5a5a5a;
  margin-bottom: 2px;
 float: right; }
.chat_new{ 
  padding: 2px 5px;
  font-size: 11px;
  border-radius: 2px;
 background-color: #25D366; color: white; }
.chat_status {
    width: 25%;
    display: flex;
    flex-direction: column;
    align-items: center; 
}
.message_container {
    display: flex;
    align-items: center;
}

img[alt="Profile Photo"] {
    order: 1;
    margin-right: 10px;
}

.message {
    order: 2;
}

.message_container {
    display: flex;
    align-items: center;
}

.message_container > img {
    flex-shrink: 0;
    margin-right: 10px;
}

.message_container > div {
    flex-grow: 1;
    display: flex;
    flex-direction: column;
}

</style>

<script>
    async function fetchMessages() {
        const url = "https://script.google.com/macros/s/AKfycbwNu4oJZ6UgvY99QcX-ntTAO2-xex0KuDO3DAIozxjcdmEPOHZ8dMR1Qs2t0wbTSYk/exec";
        const response = await fetch(url);
        let data = await response.json();
        
        // Sort data by timestamp in descending order
        data.sort((a, b) => b.timestamp - a.timestamp);

        const messagesContainer = document.getElementById('messages');
        data.forEach(message => {
            const messageDiv = document.createElement('div');
            messageDiv.className = "message";

            // Convert the timestamp to IST
            const timestamp = new Date(message.timestamp * 1000);
            const istTime = timestamp.toLocaleString('en-US', { timeZone: 'Asia/Kolkata', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: true });

            messageDiv.innerHTML = `${message.fromName} ${message.fromPhoneNumber}
            <br><br> ${message.message}
            <br>             ${istTime}`;

            messagesContainer.appendChild(messageDiv);
        });
    }

    window.onload = fetchMessages;
</script>

</head>
<body>
<div class="phoneswrapper">
<div class="phone">
<div class="phone_head">
<span class="title">Messages</span>
<div class="icon_bubble msg"> </div>
</div>
<div class="divider"></div>
<div id="messages">
<!-- Messages will be populated here -->
</div>
</div>
</div>
</body>
</html>
